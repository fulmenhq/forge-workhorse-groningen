# Forge-Workhorse-Groningen ‚Äì AI Agents Startup Guide

## üîë Read First

- **Prioritize Production Reliability**: As a production-ready workhorse template for enterprise-class applications, all actions must emphasize reliability, observability, graceful degradation, and operational excellence. Our goal is to provide a battle-tested foundation that teams can trust for mission-critical Go backends.
- Confirm your agentic interface. If the session does not name an interface adapter (e.g., Codex CLI, Claude Code), pause and request guidance from @3leapsdave before taking action.
- Do not assume an agentic identity. Agent identities are assigned in `MAINTAINERS.md`. Request assignment if none is provided.
- Review `REPOSITORY_SAFETY_PROTOCOLS.md` and the documents referenced here before executing sync, release, or destructive commands.

### Known Interface Adapters

| Agentic Interface | Definitive Prompt / Rules File                       | Attribution Format                                                                                                  |
| ----------------- | ---------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------- |
| Codex CLI         | `CODEX.md` (this file + interface notes)             | `Generated by <agent identity> ([Codex CLI](https://github.com/openai/codex)) under supervision of @3leapsdave`     |
| Claude Code       | `CLAUDE.md` (if present) or `AGENTS.md`              | `Generated by <agent identity> ([Claude Code](https://claude.com/claude-code)) under supervision of @3leapsdave`    |
| Cursor            | `AGENTS.md`                                          | `Generated by <agent identity> ([Cursor](https://cursor.sh/)) under supervision of @3leapsdave`                     |
| Cline             | `.cline/rules/PROJECT.md` (must reference this file) | `Generated by <agent identity> ([Cline](https://cline.bot/)) under supervision of @3leapsdave`                      |
| KiloCode          | `AGENTS.md`                                          | `Generated by <agent identity> ([KiloCode](https://github.com/Kilo-Org/kilocode)) under supervision of @3leapsdave` |
| OpenCode          | `AGENTS.md`                                          | `Generated by <agent identity> ([OpenCode](https://github.com/sst/opencode)) under supervision of @3leapsdave`      |

**Important**: Replace `<agent identity>` with the canonical name defined in `MAINTAINERS.md` (e.g., `Forge Architect`).

**Project**: forge-workhorse-groningen
**Purpose**: Production-ready workhorse application template for robust, scalable Go backends ‚Äì Providing enterprise-grade HTTP server, observability, configuration management, and operational patterns.
**Governance**: 3leaps Initiative

## Agent Identities

Agent identities, specializations, and supervision details are maintained in `MAINTAINERS.md`. Refer to that file for the current roster of AI co-maintainers.

**Current Agents**:

- ‚öôÔ∏è **Forge Architect** (@forge-architect) - Integration & Reliability Lead

## Commit Attribution

**DO**: Follow the standard attribution format and concise commit message style

- Attribution format: [Agentic Attribution Standard](https://github.com/fulmenhq/crucible/blob/main/docs/standards/agentic-attribution.md)
- Message style: Concise, semantic commit messages (feat:, fix:, docs:, chore:, etc.)

**Required trailers for commits**:

1. Generated by line with interface link and human supervisor
2. `Co-Authored-By:` trailer with agent email
3. `Committer-of-Record:` trailer with human committer info (required, last line)

**DO NOT**:

- Use simplified or incomplete attribution formats
- Use excessive emoji sections in commit messages
- Write verbose internal documentation style in commits (belongs in code comments or docs/)
- Commit without running `make test` and `make lint`

**Example** (using Claude Code interface with Forge Architect identity):

```
feat: integrate App Identity Module from gofulmen v0.1.9

Integrate the App Identity Module to standardize application metadata
management and eliminate hardcoded configuration values. This is the
first phase of v0.1.0 release to bring Groningen into compliance with
the Fulmen Forge Workhorse Standard.

üéØ Changes:
- Create `.fulmen/app.yaml` with identity metadata
- Replace hardcoded env prefix with identity-based lookup
- Update logger and metrics to use telemetry namespace
- Add backward compatibility for old config paths

üìä Coverage: All tests passing (internal/observability)
üõ°Ô∏è Quality: Zero lint issues, code formatted

Generated by Forge Architect ([Claude Code](https://claude.com/claude-code)) under supervision of @3leapsdave

Co-Authored-By: Forge Architect <noreply@3leaps.net>
Committer-of-Record: Dave Thompson <dave.thompson@3leaps.net> [@3leapsdave]
```

## Session Startup Protocol

1. **Context Review**
   - **REQUIRED**: Read `Makefile` to understand available targets and build workflow
   - Read `MAINTAINERS.md`, `REPOSITORY_SAFETY_PROTOCOLS.md`, `README.md`, and `.fulmen/app.yaml`
   - Review Crucible standards in `docs/` directory (if synced)
   - **CRITICAL**: Understand that this is a template - consumers will CDRL (Clone ‚Üí Degit ‚Üí Refit ‚Üí Launch) this repo

2. **Environment Check**
   - Confirm required tools (`go >= 1.21`, `goneat`, `make`) are available
   - Run `make bootstrap` if tools are missing

3. **Plan**
   - Outline steps in `.plans/` (gitignored) or within the session transcript before modifying files
   - For major features, create feature briefs in `.plans/active/<version>/`

4. **Quality Assurance**
   - Run `make test` before every commit
   - Verify code formatting: `make fmt`
   - Run linting: `make lint` or `make check-all`
   - Ensure application builds: `make build`
   - Test CLI commands manually when adding/modifying

5. **Execute Safely**
   - Use prescribed Make targets: `make test`, `make fmt`, `make lint`, `make build`
   - Follow Go best practices and idioms
   - Maintain template flexibility for CDRL consumers

6. **Attribution**
   - Follow [Agentic Attribution Standard](https://github.com/fulmenhq/crucible/blob/main/docs/standards/agentic-attribution.md) for commit messages

7. **Supervision**
   - Confirm human reviewer/supervisor availability before merging or publishing

## Operational Guidelines

### DO

- **Quality First**: Always run `make test` and `make lint` before commits
- **Use Make Targets**: Prefer `make test`, `make build`, `make run` over raw commands
- **Follow Workhorse Standard**: Adhere to Fulmen Forge Workhorse Standard (see `docs/`)
- **Maintain Test Coverage**: Add tests for all new functionality
- **Document for CDRL Users**: Update README and docs for template consumers
- **Use App Identity**: Never hardcode app name, env var prefix, or config paths
- **Integrate gofulmen**: Use gofulmen modules for logging, config, telemetry, identity
- **Production Patterns**: Graceful shutdown, config reload, observability, error handling

### DO NOT

- **Edit App Identity Directly**: `.fulmen/app.yaml` is the template identity - CDRL users will customize
- **Commit Planning Files**: `.plans/` is permanently gitignored‚Äînever add, stage, or attempt to commit anything under this directory
- **Skip Tests**: Never commit code without passing tests
- **Ignore Linting**: All code must pass linting before commit
- **Commit Without Formatting**: Run `make fmt` before every commit
- **Hardcode Application Names**: Use `appidentity.Get()` for all app-specific values
- **Break CDRL Workflow**: Changes should make refitting easier, not harder
- **Store Secrets**: Never commit API keys, tokens, or credentials

## Workhorse-Specific Guidelines

### Template Philosophy

This is a **template repository** that users will CDRL:

- **Clone**: `git clone` to local machine
- **Degit**: Remove git history
- **Refit**: Customize via `.fulmen/app.yaml` and module path
- **Launch**: Run their application

All changes must consider the CDRL workflow and make it easier for users to customize the template.

### Key Template Features

- **App Identity**: Single-file identity management (`.fulmen/app.yaml`)
- **CLI Framework**: Cobra-based commands (serve, version, health, envinfo, doctor)
- **HTTP Server**: Chi router with standard endpoints (/health, /version, /metrics)
- **Observability**: Gofulmen logging (SIMPLE/STRUCTURED profiles) and Prometheus metrics
- **Configuration**: Three-layer config (defaults ‚Üí file ‚Üí env vars)
- **Production Ready**: Graceful shutdown, signal handling, error handling

### Integration Priorities

1. **App Identity** - Eliminate hardcoding
2. **Signal Handling** - Graceful shutdown, config reload, double-tap force quit
3. **Exit Codes** - Standardized foundry exit codes for operations
4. **Observability** - Structured logging, metrics, tracing
5. **Testing** - Comprehensive test coverage with fixtures
6. **Documentation** - Clear CDRL instructions for consumers

## Reference Documents

- `MAINTAINERS.md` (SSOT for agent identities)
- `REPOSITORY_SAFETY_PROTOCOLS.md`
- `README.md` (template overview and CDRL guide)
- `.fulmen/app.yaml` (app identity definition)
- `docs/` (Crucible standards and guides)
- [Fulmen Forge Workhorse Standard](https://github.com/fulmenhq/crucible/blob/main/docs/architecture/fulmen-forge-workhorse-standard.md)
- [Agentic Attribution Standard](https://github.com/fulmenhq/crucible/blob/main/docs/standards/agentic-attribution.md)
